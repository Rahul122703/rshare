function togglePassword() { const passwordInput =
document.getElementById("password"); const passwordToggle =
document.querySelector(".password-toggle"); if (passwordInput.type ===
"password") { passwordInput.type = "text"; passwordToggle.textContent = "🙈"; }
else { passwordInput.type = "password"; passwordToggle.textContent = "👁️"; } }
function elementVisibility(element, mode) {} async function getUserData() { try
{ const response = await fetch("/get_json_data_user"); if (!response.ok) { throw
new Error("Failed to fetch user data"); } const data = await response.json();
return data; } catch (error) { console.error(error); if (result) {
result.textContent = "There was an error fetching the data"; } } } function
input_filter_dynamic( input_element, filtering_list, warning_box_element,
tick_element ) { input_element.addEventListener("keyup", () => { let
input_element_value = input_element.value.toLowerCase(); let preexisting_strings
= filtering_list.filter((currentItem) => { return currentItem.toLowerCase() ===
input_element_value; }); if (preexisting_strings.length > 0) {
warning_box_element.style.display = "block"; tick_element.style.display =
"none"; } else { warning_box_element.style.display = "none"; if
(input_element_value.length > 3) { tick_element.style.display = "block";
showRegisterButton(register_button); } else { tick_element.style.display =
"none"; } } }); } function showRegisterButton(element) { if (
username_tick.style.display == "block" || email_tick.style.display == "block" ||
password_warning.style.display == "none" ) { element.style.display = "block"; }
else { element.style.display = "none"; } } //VARIABLES let input_check = 0; let
usernames = []; let emails = []; let register_button =
document.querySelector(".register-button"); let username_warning =
document.querySelector("#username_warning"); let username_input =
document.querySelector(".username_input"); let username_tick =
document.querySelector("#username_tick"); let email_tick =
document.querySelector("#email_tick"); let email_input =
document.querySelector(".email_input"); let email_warning =
document.querySelector("#email_warning"); let password_input =
document.querySelector(".password_input"); let password_warning =
document.querySelector("#password_warning"); getUserData().then((userData) => {
userData.forEach((currentItem) => { usernames.push(currentItem.username);
emails.push(currentItem.email.replace("@gmail.com", "")); }); });
password_input.addEventListener("keyup", () => { let
password_element_value_length = password_input.value.toLowerCase().length; if
(password_element_value_length < 7) { password_warning.style.display = "block";
} else { console.log("here"); password_warning.style.display = "none";
showRegisterButton(register_button); } }); input_filter_dynamic(email_input,
emails, email_warning, email_tick); input_filter_dynamic( username_input,
usernames, username_warning, username_tick );


function togglePassword() {
        const passwordInput = document.getElementById("password");
        const passwordToggle = document.querySelector(".password-toggle");
        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          passwordToggle.textContent = "🙈";
        } else {
          passwordInput.type = "password";
          passwordToggle.textContent = "👁️";
        }
      }

      async function getUserData() {
        try {
          const response = await fetch("/get_json_data_user");
          if (!response.ok) {
            throw new Error("Failed to fetch user data");
          }
          const data = await response.json();
          return data;
        } catch (error) {
          console.error(error);
          if (result) {
            result.textContent = "There was an error fetching the data";
          }
        }
      }

      function input_filter_dynamic(
        input_element,
        filtering_list,
        warning_box_element,
        tick_element
      ) {
        input_element.addEventListener("keyup", () => {
          let input_element_value = input_element.value.toLowerCase();
          let preexisting_strings = filtering_list.filter((currentItem) => {
            return currentItem.toLowerCase() === input_element_value;
          });
          if (preexisting_strings.length > 0) {
            warning_box_element.style.display = "block";
            tick_element.style.display = "none";
          } else {
            warning_box_element.style.display = "none";
            if (input_element_value.length > 3) {
              tick_element.style.display = "block";
            } else {
              tick_element.style.display = "none";
            }
          }
          showRegisterButton(); // Update button visibility
        });
      }

      function showRegisterButton() {
        const usernameValid = username_tick.style.display === "block";
        const emailValid = email_tick.style.display === "block";
        const passwordValid = password_input.value.length >= 5;

        // Only show button if all conditions are met
        if (usernameValid && emailValid && passwordValid) {
          register_button.style.display = "block";
        } else {
          register_button.style.display = "none";
        }
      }

      // VARIABLES
      let usernames = [];
      let emails = [];
      let register_button = document.querySelector(".register-button");

      let username_warning = document.querySelector("#username_warning");
      let username_input = document.querySelector(".username_input");
      let username_tick = document.querySelector("#username_tick");

      let email_tick = document.querySelector("#email_tick");
      let email_input = document.querySelector(".email_input");
      let email_warning = document.querySelector("#email_warning");

      let password_input = document.querySelector(".password_input");
      let password_warning = document.querySelector("#password_warning");

      getUserData().then((userData) => {
        userData.forEach((currentItem) => {
          usernames.push(currentItem.username);
          emails.push(currentItem.email);
        });
      });

      password_input.addEventListener("keyup", () => {
        let password_element_value_length = password_input.value.length;
        if (password_element_value_length < 5) {
          password_warning.style.display = "block";
        } else {
          password_warning.style.display = "none";
        }
        showRegisterButton(); // Update button visibility
      });

      input_filter_dynamic(email_input, emails, email_warning, email_tick);
      input_filter_dynamic(
        username_input,
        usernames,
        username_warning,
        username_tick
      );